---

#
# lets test listeners
#
data:
  heard: {}

import_into_namespace: 
  - s_util

functions:
  inc: (s,n) => s.namespace.data.heard[n] = 1 + (s.namespace.data.heard[n] || 0)

page:
  title: listener test
 
  body:
    listen: s => s.namespace.fun.inc( 'body' )
    contents:
      - knock:
      - knock:
          - pock:
      - prevnext:

recipes:
  pock:
    listen: s => s.namespace.fun.inc( 'pock' )
    contents:
      - span:
  knock:
    listen: s => s.namespace.fun.inc( 'knock' )
    contents:
      - div:

test: >-
  const tester = SP.tester;
  tester.html_structure( document.body, 
                  [ 'body', ['div'], ['div', ['span']],
                      ['div', 
                         [ 'a', 'first', { 'data-if': 'true', href: 's1.html' } ],
                         [ 'span', '', { 'data-else': 'false', style: 'display: none;' } ],
                         [ 'a', '', { 'data-if': 'false', style: 'display: none;' } ],
                         [ 'span', 'next', { 'data-else': 'true' } ]
                         ],
                  ],
                  'body structure' );

  tester.doneTesting();
  
  
    
